# dbbackup Configuration
# Managed by Ansible - do not edit manually

# Database
db-type = {{ dbbackup_db_type }}
{% if dbbackup_socket is defined %}
socket = {{ dbbackup_socket }}
{% else %}
host = {{ dbbackup_db_host }}
port = {{ dbbackup_db_port }}
{% endif %}
user = {{ dbbackup_db_user }}
{% if dbbackup_allow_root | default(true) %}
allow-root = true
{% endif %}

# Backup
backup-dir = {{ dbbackup_backup_dir }}
compression = {{ dbbackup_compression }}

{% if dbbackup_pitr_enabled | default(false) %}
# Point-in-Time Recovery
pitr = true
{% endif %}

{% if dbbackup_dedup_enabled | default(false) %}
# Deduplication
dedup = true
{% endif %}

# Retention
retention-days = {{ dbbackup_retention_days }}
min-backups = {{ dbbackup_min_backups }}

{% if dbbackup_gfs_enabled %}
# GFS Retention Policy
gfs = true
gfs-daily = {{ dbbackup_gfs_daily }}
gfs-weekly = {{ dbbackup_gfs_weekly }}
gfs-monthly = {{ dbbackup_gfs_monthly }}
gfs-yearly = {{ dbbackup_gfs_yearly }}
{% endif %}

{% if dbbackup_encryption_enabled %}
# Encryption
encrypt = true
{% endif %}

{% if dbbackup_cloud_enabled %}
# Cloud Storage
cloud-provider = {{ dbbackup_cloud_provider }}
cloud-bucket = {{ dbbackup_cloud_bucket }}
{% if dbbackup_cloud_endpoint %}
cloud-endpoint = {{ dbbackup_cloud_endpoint }}
{% endif %}
{% endif %}
