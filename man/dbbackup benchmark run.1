.nh
.TH "DBBACKUP" "1" "Feb 2026" "dbbackup" "Database Backup Tool"

.SH NAME
dbbackup-benchmark-run - Benchmark a single database (backup → restore → verify)


.SH SYNOPSIS
\fBdbbackup benchmark run [flags]\fP


.SH DESCRIPTION
Run N iterations of backup + restore (+ optional verify) against
a single database and report timing statistics.

.PP
Each iteration:
  1. Runs 'dbbackup backup single' and measures wall time + peak RSS
  2. Restores into a temporary database and measures wall time
  3. Optionally verifies the backup
  4. Cleans up the temporary database

.PP
Results are saved to the catalog DB and optionally to JSON/Markdown files.


.SH OPTIONS
\fB--backup-dir\fP=""
	Directory for benchmark backups (default: temp)

.PP
\fB--catalog-db\fP=""
	Catalog DB path (default: ~/.config/dbbackup/catalog.db)

.PP
\fB--clean\fP[=true]
	Remove backup files between iterations

.PP
\fB--compression\fP="gzip"
	Compression algorithm (gzip|zstd|none)

.PP
\fB--compression-level\fP=6
	Compression level (0-9)

.PP
\fB--database\fP=""
	Database name to benchmark (required for 'run')

.PP
\fB-d\fP, \fB--db-type\fP="postgres"
	Database engine (postgres|mysql|mariadb)

.PP
\fB--dump-format\fP=""
	PostgreSQL dump format (custom|plain|directory)

.PP
\fB-h\fP, \fB--help\fP[=false]
	help for run

.PP
\fB--host\fP="localhost"
	Database host

.PP
\fB--iterations\fP=3
	Number of benchmark iterations

.PP
\fB--json\fP[=false]
	Print JSON output to stdout

.PP
\fB--native\fP[=true]
	Use native Go engine

.PP
\fB--output-dir\fP="reports"
	Output directory for JSON/Markdown reports

.PP
\fB--password\fP=""
	Database password (prefer env: PGPASSWORD / MYSQL_PWD)

.PP
\fB--port\fP=0
	Database port (0 = auto-detect from engine)

.PP
\fB--profile\fP="balanced"
	Resource profile (conservative|balanced|performance|turbo)

.PP
\fB--socket\fP=""
	Unix socket path (MySQL/MariaDB)

.PP
\fB--ssl-mode\fP="prefer"
	SSL mode

.PP
\fB--user\fP=""
	Database user (default: auto per engine)

.PP
\fB--verify\fP[=true]
	Run verify phase after backup

.PP
\fB--workers\fP=16
	Parallel workers / jobs


.SH OPTIONS INHERITED FROM PARENT COMMANDS
\fB--allow-root\fP[=false]
	Allow running as root/Administrator

.PP
\fB--auto-detect-cores\fP[=true]
	Auto-detect CPU cores

.PP
\fB--check-resources\fP[=true]
	Check system resource limits

.PP
\fB-c\fP, \fB--config\fP=""
	Path to config file (default: .dbbackup.conf in current directory)

.PP
\fB--cpu-auto-tune\fP[=true]
	Vendor-aware auto-tuning (Intel/AMD/ARM parallelism, compression, buffer sizes)

.PP
\fB--cpu-boost\fP[=false]
	Set CPU governor to 'performance' during backup (requires root)

.PP
\fB--cpu-workload\fP="balanced"
	CPU workload type (cpu-intensive|io-intensive|balanced)

.PP
\fB--debug\fP[=false]
	Enable debug logging

.PP
\fB--debug-locks\fP[=false]
	Enable detailed lock debugging (captures PostgreSQL lock configuration, Large DB Guard decisions, boost attempts)

.PP
\fB--dump-jobs\fP=8
	Number of parallel dump jobs

.PP
\fB--fallback-tools\fP[=true]
	Fallback to external tools if native engine fails

.PP
\fB--insecure\fP[=false]
	Disable SSL (shortcut for --ssl-mode=disable)

.PP
\fB--jobs\fP=16
	Number of parallel jobs

.PP
\fB--max-cores\fP=32
	Maximum CPU cores to use

.PP
\fB--max-retries\fP=3
	Maximum connection retry attempts

.PP
\fB--min-backups\fP=5
	Minimum number of backups to keep

.PP
\fB--native-debug\fP[=false]
	Enable detailed native engine debugging

.PP
\fB--native-engine\fP[=true]
	Use pure Go native engines (alias for --native)

.PP
\fB--no-color\fP[=false]
	Disable colored output

.PP
\fB--no-config\fP[=false]
	Don't load configuration from .dbbackup.conf

.PP
\fB--no-save-config\fP[=false]
	Don't save configuration after successful operations

.PP
\fB--retention-days\fP=30
	Backup retention period in days (0=disabled)


.SH SEE ALSO
\fBdbbackup-benchmark(1)\fP


.SH HISTORY
18-Feb-2026 Auto generated by spf13/cobra
